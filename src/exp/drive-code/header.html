<link href="https://fonts.googleapis.com/css?family=Raleway" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/2.1.2/TweenMax.min.js" aysnc="true"></script>
<script>
  Y.on('available', function () {
    Y.one('body').prepend(
      '<div class="loading-screen"><div><img class="loading-logo" src="https://lukemoderwell.com/drive-loader.b3b24274.gif"></div></div><div class="loading-swiper"></div>'
    ).setStyle("display", "block");

    function animateSwiper() {
      var tl = new TimelineLite({
        delay: 1.5
      });

      // swipe in
      tl.to('.loading-swiper', .75, {
        height: '100%',
        y: 0,
        ease: Power2.easeIn
      }).to('.loading-screen', 0, {
        display: 'none',
        pointerEvents: 'none',
        zIndex: 0,
      }).to('.loading-swiper', .75, {
        height: 0,
        top: 0,
        y: '-100%',
        zIndex: 0,
        ease: Power2.easeOut
      });

      return tl;
    }

    function videoTransition() {
      var tl = new TimelineLite({
        delay: 7
      });

      tl.to('.video-wrapper', .75, {
        width: '70vw',
        x: '30vw',
        ease: Power2.easeInOut
      }).to('.video-caption', .75, {
        opacity: 1,
        y: 0,
        ease: Power1.easeInOut
      });

      return tl;
    }

    function introScrollable() {
      var tl = new TimelineLite({
        delay: 10
      });

      tl.to('.drive-intro', .75, {
        scale: .75,
        padding: '45px',
        ease: Power1.easeInOut
      });

      return tl;
    }

    function fadeInLoader() {
      TweenMax.to('.loading-logo', .75, {
        opacity: 1,
        y: 0,
        delay: .25,
        ease: Power1.easeInOut
      });
    }

    // var master = new TimelineMax({
    //   smoothChildTiming: true,
    //   delay: 1.5
    // });

    // master.add(animateSwiper(), "swiper");
    // master.add(videoTranstion(), "videoTransition");

    function checkVideoState() {
      var v = document.querySelector('.video-poster');
      var i = setInterval(function () {
        if (v.readyState > 3) {
          animateSwiper();
          videoTransition();
          introScrollable();
          // add header classes to get white text
          // Y.one(".Header--bottom").addClass('Header--index-gallery Header--overlay');
          clearInterval(i);
        }
      }, 500);
    }
    fadeInLoader();
    checkVideoState();
  }, 'body');
</script>
<style>
  body {
    display: none;
  }

  .loading-screen {
    display: flex;
    align-items: center;
    justify-content: center;
    position: fixed;
    width: 100%;
    height: 100%;
    top: 0;
    background-color: #303643;
    z-index: 100001;
    transition: .45s all ease-in-out;
    overflow: hidden;
  }

  .loading-logo {
    opacity: 0;
    transform: translateY(15%);
    width: 220px;
    height: 220px;
  }

  .loading-swiper {
    position: absolute;
    bottom: 0;
    width: 100%;
    height: 0;
    transform: translateY(100%);
    background-color: #000;
    z-index: 999999;
  }

  /* Make sure SS Gallery content is below intro */
  .sqs-gallery-container {
    margin-top: 100vh;
  }

  /* Eliminate SS top margin */
  .Main-content {
    margin-top: 0;
    padding-top: 0;
  }
</style>
